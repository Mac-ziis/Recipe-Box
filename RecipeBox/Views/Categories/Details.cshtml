@{
  Layout = "_Layout";
}

@model RecipeBox.Models.Category
@using RecipeBox.Models

<h2>Category Details</h2>
<hr />
<h3>@Html.DisplayNameFor(model => model.Name): @Html.DisplayFor(model => model.Name)<h3>

    @if (@Model.Recipes.Count == 0)
    {
      <h3>No recipe have been added to this category yet!</h3>
    }
    else
    {
      <h3>Recipe:</h3>
      <ul>
        @foreach (Recipe recipe in Model.Recipes)
        {
          string tags = "";
          @if (recipe.JoinEntities.Count == 0)
          {
            tags = "This recipe does not have any tags.";
          }
          else
          {
            List<string> recipeList = new List<string>();
            @foreach (RecipeTag join in recipe.JoinEntities)
            {
              recipeList.Add(join.Tag.Title);
            }
            tags = String.Join(",", recipeList);
          }
          <li>@recipe.RecipeName | Tags: @tags</li>
        }
      </ul>
    }
    <p>@Html.ActionLink("Back to categories", "Index")</p>
    <p>@Html.ActionLink("Edit Category", "Edit", new { id = Model.CategoryId })</p>
    <p>@Html.ActionLink("Delete Category", "Delete", new { id = Model.CategoryId })</p>
    <p>@Html.ActionLink("Add new recipe", "Create", "Recipes")</p>
    <p>@Html.ActionLink("Back to list", "Index")</p>